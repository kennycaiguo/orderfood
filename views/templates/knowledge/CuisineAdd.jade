doctype transitional
html(xmlns='http://www.w3.org/1999/xhtml')
  head
    title 添加菜品
    meta(http-equiv='Content-Type', content='text/html; charset=UTF-8')
    script(type='text/javascript', src='/js/jquery.1.12.4.min.js')
    script(type='text/javascript', src='/js/CuisineJs.js')
    link(rel='stylesheet', type='text/css', href='/css/index.css')
  body.mian_bj
    .mian_top_01
      .mian_top_r
      .mian_top_l
      .mian_top_c
        ul
          li
            a(href='javascript:void(0)' onclick='show()')
              p
                | 菜品管理
      .mian_b
          form#submitForm(action='cuisineadd' method="POST" enctype="multipart/form-data")
             table.mian_b_bg_xz(width='100%', border='0', cellpadding='0', cellspacing='0')
                tbody
                 tr
                  td.mian_b_bg_lm(colspan='3') 添加菜品
                  td
                    input#picture(type='file',name='multipartFile')
                    tr
                      td
                          img(id='pictureshow',width='100', height='100', style='vertical-align: text-top;')
                      td  
                      th 菜品名称：
                      td
                        input(id='cuisineName' name='cuisinename' type='text')
                      td   
                      th 价格：
                      td
                        input(id='price' name='price' type='text')
                      td
                      th 添加缩写
                        input(id='cuisineacronym' name='cuisineacronym' type='text')
                      td  
                      th 选择菜类：
                      td(colspan='1')
                        input#Checkbox3( name='cuisineidentify' type='Radio' value='0')
                        | 普通菜
                        input#Checkbox4(name='cuisineidentify' type='Radio' value='1')
                        | 热门菜
                        input#Checkbox5(name='cuisineidentify' type='Radio' value='2')
                        | 促销菜 
                      td  
                      th 菜品分类：
                        select#cClassifyid(name='cClassifyid')
                          each item in users
                                  option(value='#{item.classifyid}')=item.classifyname
                      td  
                         div(align='center')
                         button(type='submit') 提交
                      td
                         button(type='button' onclick='') 重置
                      td



script(src='/js/jquery-1.7.1.min.js')
script(type='text/javascript').
    function add() {
        var cuisineName = $("#cuisineName").val();
        var price = $("#price").val();
        var cuisineacronym = $("#cuisineacronym").val();
        var cClassifyid=$("#cClassifyid").val();
        var cuisineidentify = $("[name=cuisineidentify]:checked").val();
        if (cuisineName == null || cuisineName == "") {
            alert("菜品名称不能为空");
            return;
        } else if (price == null || price == "") {
            alert("价格不能为空");
            return;
        } else if (cuisineacronym == null || cuisineacronym == "") {
            alert("首字母缩写不能为空");
            return;
        } else if (cClassifyid == null || cClassifyid == "") {
            alert("菜类不能为空");
            return;
        }
        var multipartFile=$("[name=multipartFile]").val();
        var data= new FormData($("#submitForm"));
        data.append("multipartFile",multipartFile);
        data.append("cuisinename",cuisineName);
        data.append("price",price);
        data.append("cuisineacronym",cuisineacronym);
        data.append("cuisineidentify",cuisineidentify);
        data.append("cClassifyid",cClassifyid);
        $.ajax({
            "url": "cuisineadd",
            "dataType": "json",
            "data":data,
            "contentType": false, //必须
            "processData": false, //必须
            "type": "post",
            "success": function (result) {
                if (result > 0) {
                    alert("添加成功");
                } else {
                    alert("添加失败");
                }
            }
        })

    }


    function show() {
        window.location.href='cuisine';
    }